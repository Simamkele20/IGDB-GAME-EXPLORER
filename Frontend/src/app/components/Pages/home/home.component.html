<app-header (searchTermChange)="onSearchTermChange($event)"></app-header>
<div class="home-container">
  <h5>Welcome to IGDB GAME EXPLORER</h5>
  <div *ngIf="loading" class="spinner-container">
    <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
  </div>
  <div *ngIf="!loading">

  <div class="toggle-container">
    <mat-button-toggle-group name="genres" (change)="toggleGenre($event.value)">
      <mat-button-toggle
        *ngFor="let genre of uniqueGenres"
        [value]="genre"
        [checked]="selectedGenres.includes(genre)"
      >
        {{ genre }}
      </mat-button-toggle>
    </mat-button-toggle-group>

    <mat-button-toggle-group
      name="platforms"
      (change)="togglePlatform($event.value)"
    >
      <mat-button-toggle
        *ngFor="let platform of uniquePlatforms"
        [value]="platform"
        [checked]="selectedPlatforms.includes(platform)"
      >
        {{ platform }}
      </mat-button-toggle>
    </mat-button-toggle-group>
  </div>

  <ng-container *ngIf="filteredGames.length > 0; else noGames">
    <div class="game-list">
      <ng-container *ngIf="filteredGames.length > 0; else noGames">
        <div class="game-list">
          <mat-card
            *ngFor="let game of filteredGames"
            class="game-item"
            style="width: 300px"
          >
            <a [routerLink]="['/games/', game.id]">
              <img
                [src]="
                  game.cover
                    ? 'https:' + game.cover.url.replace('thumb', '1080p')
                    : 'https://i.ibb.co/pzgS2h4/placeholder-90x90.png'
                "
                alt="{{ game.name }} cover"
                style="width: 300px; height: 300px"
              />
              <mat-card-title>{{ game.name }}</mat-card-title>
            
              <mat-card-content>
                <p>
                  <span class="Headings">Genres:</span> {{ getGenres(game) }}
                </p>
                <p>
                  <span class="Headings">Platforms:</span>
                  {{ getPlatforms(game) }}
                </p>
                <p>
                  <span class="Headings">Summary:</span>
                  {{
                    game.summary ? game.summary : "The game is not yet released"
                  }}
                </p>
              </mat-card-content>
            </a>
          </mat-card>
        </div>
      </ng-container>
    </div>
  </ng-container>

  

  <ng-template #noGames>
    <h2>No games found matching your criteria.</h2>
  </ng-template>
</div>
</div>
